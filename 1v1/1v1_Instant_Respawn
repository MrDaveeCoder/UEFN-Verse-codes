using { /Fortnite.com/FortPlayerUtilities }
using { /Fortnite.com/Characters }
using { /Fortnite.com/Game }
using { /Fortnite.com/Devices }
using { /Verse.org/Random }
using { /Verse.org/Simulation }
using { /UnrealEngine.com/Temporary/SpatialMath }
using { /UnrealEngine.com/Temporary/Diagnostics }
<#
 __  __      ____                       
|  \/  |_ __|  _ \  __ ___   _____  ___ 
| |\/| | '__| | | |/ _` \ \ / / _ \/ _ \
| |  | | |  | |_| | (_| |\ V /  __/  __/
|_|  |_|_|  |____/ \__,_| \_/ \___|\___|
#>

Instant_Respawn := class(creative_device):

    respawnposition: vector3=vector3{X:= 250.00, Y:= 0.01, Z:= 161.9}

    # Elimination manager to check weather a player was eliminated or not.    
    @editable
    ElimManager : elimination_manager_device = elimination_manager_device{}
    # Teleporters for the players to respawn.
    @editable
    TeleporterTeam1 : teleporter_device = teleporter_device{}
    @editable
    TeleporterTeam2 : teleporter_device = teleporter_device{}

    # Checks the players
    NowRespawn(Agent: agent)<suspends>:void=
       Sleep(0.1)
       Agent.Respawn(respawnposition, rotation{})
       TeleporterTeam1.Teleport(Agent)
       TeleporterTeam2.Teleport(Agent)

    # This respawns the eliminated player.
    SE(Agent:agent):void=
       spawn{NowRespawn(Agent)}

    # Checks when a player is eliminated.
    OnBegin<override>()<suspends>:void=
       ElimManager.EliminatedEvent.Subscribe(SE)
